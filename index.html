
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selenium Test Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .screenshot {
            width: 200px;
            height: auto;
            cursor: pointer;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }
        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        #zoomControls {
            text-align: center;
            margin-top: 10px;
        }
        #zoomControls button {
            font-size: 18px;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <h1>Selenium Test Results</h1>
    <div id="testResults"></div>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImg">
        <div id="zoomControls">
            <button id="zoomIn">+</button>
            <button id="zoomOut">-</button>
        </div>
    </div>

    <script>
        const testResults = [{"timestamp": "2024-09-23 08:04:55", "results": [{"url": "https://example.com", "browser": "chrome", "device": "desktop", "screenshot": "screenshots/example.com_chrome_desktop_20240923_080405.png", "status": "Pass"}, {"url": "https://example.com", "browser": "chrome", "device": "mobile", "screenshot": "screenshots/example.com_chrome_mobile_20240923_080407.png", "status": "Pass"}, {"url": "https://example.com", "browser": "firefox", "device": "desktop", "screenshot": "screenshots/example.com_firefox_desktop_20240923_080409.png", "status": "Pass"}, {"url": "https://example.com", "browser": "firefox", "device": "mobile", "screenshot": "screenshots/example.com_firefox_mobile_20240923_080412.png", "status": "Pass"}, {"url": "https://example.com", "browser": "edge", "device": "desktop", "screenshot": "screenshots/example.com_edge_desktop_20240923_080442.png", "status": "Pass"}, {"url": "https://example.com", "browser": "edge", "device": "mobile", "screenshot": "screenshots/example.com_edge_mobile_20240923_080443.png", "status": "Pass"}, {"url": "https://example.org", "browser": "chrome", "device": "desktop", "screenshot": "screenshots/example.org_chrome_desktop_20240923_080445.png", "status": "Pass"}, {"url": "https://example.org", "browser": "chrome", "device": "mobile", "screenshot": "screenshots/example.org_chrome_mobile_20240923_080446.png", "status": "Pass"}, {"url": "https://example.org", "browser": "firefox", "device": "desktop", "screenshot": "screenshots/example.org_firefox_desktop_20240923_080449.png", "status": "Pass"}, {"url": "https://example.org", "browser": "firefox", "device": "mobile", "screenshot": "screenshots/example.org_firefox_mobile_20240923_080451.png", "status": "Pass"}, {"url": "https://example.org", "browser": "edge", "device": "desktop", "screenshot": "screenshots/example.org_edge_desktop_20240923_080453.png", "status": "Pass"}, {"url": "https://example.org", "browser": "edge", "device": "mobile", "screenshot": "screenshots/example.org_edge_mobile_20240923_080455.png", "status": "Pass"}]}];

        function createTable(results) {
            const urls = [...new Set(results.map(r => r.url))];
            const browserDevices = ['chrome desktop', 'chrome mobile', 'firefox desktop', 'firefox mobile', 'edge desktop', 'edge mobile'];
            
            let tableHtml = '<table><tr><th>URL</th>';
            browserDevices.forEach(bd => {
                tableHtml += `<th>${bd}</th>`;
            });
            tableHtml += '</tr>';

            urls.forEach(url => {
                tableHtml += `<tr><td>${url}</td>`;
                browserDevices.forEach(bd => {
                    const [browser, device] = bd.split(' ');
                    const result = results.find(r => r.url === url && r.browser === browser && r.device === device);
                    if (result) {
                        tableHtml += `<td><img src="${result.screenshot}" alt="Screenshot" class="screenshot" onclick="openModal(this.src)"></td>`;
                    } else {
                        tableHtml += '<td>N/A</td>';
                    }
                });
                tableHtml += '</tr>';
            });

            tableHtml += '</table>';
            return tableHtml;
        }

        function renderResults() {
            const testResultsDiv = document.getElementById('testResults');
            let resultsHtml = '';

            testResults.forEach((testRun, index) => {
                resultsHtml += `
                    <h2>${testRun.timestamp}${index === 0 ? ' (Latest)' : ''}</h2>
                    ${createTable(testRun.results)}
                `;
            });
            testResultsDiv.innerHTML = resultsHtml;
        }

        // Modal functionality
        const modal = document.getElementById("myModal");
        const modalImg = document.getElementById("modalImg");
        const closeBtn = document.getElementsByClassName("close")[0];
        const zoomInBtn = document.getElementById("zoomIn");
        const zoomOutBtn = document.getElementById("zoomOut");
        let zoomLevel = 1;

        function openModal(imgSrc) {
            modal.style.display = "block";
            modalImg.src = imgSrc;
            zoomLevel = 1;
            modalImg.style.transform = `scale(${zoomLevel})`;
        }

        closeBtn.onclick = function() {
            modal.style.display = "none";
        }

        zoomInBtn.onclick = function() {
            zoomLevel += 0.1;
            modalImg.style.transform = `scale(${zoomLevel})`;
        }

        zoomOutBtn.onclick = function() {
            zoomLevel = Math.max(0.1, zoomLevel - 0.1);
            modalImg.style.transform = `scale(${zoomLevel})`;
        }

        // Initial render
        renderResults();
    </script>
</body>
</html>
    